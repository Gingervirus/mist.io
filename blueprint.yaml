# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# Blueprint for deploying a Kubernetes cluster through Mist.io
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

tosca_definitions_version: cloudify_dsl_1_2

# # # # # # # # # # # # # # i# # # # # # # # # # # # # # # #
# Imports section
# Importing the Mist.io-Cloudify Plugin
# # # # # # # # # # # # # # i# # # # # # # # # # # # # # # #

imports:
  - http://www.getcloudify.org/spec/cloudify/3.3m5/types.yaml
  - http://raw.githubusercontent.com/mistio/cloudify-mist-plugin/master/plugin.yaml

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# Inputs section
# To specify deployment inputs run:
#   cfy deployments create -b <blueprint_id> -d <deployment_id> -i inputs.json
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

inputs:
  mist_uri:
    description: The Mist.io URI
    type: string
    default: 'https://mist.io'
  mist_username:
    description: Username of the Mist.io user
    type: string
    default: ''
  mist_password:
    description: Password of the Mist.io user
    type: string
    default: ''
  mist_token:
    description: An API Token generated by Mist.io in order to be used with every request
    type: string
    default: ''
 
node_templates:
  kube_master:
    type: cloudify.mist.nodes.KubernetesMaster
    properties:
      use_external_resource: false
      resource_id: ''
      configured: false
      parameters:
        cloud_id: 20c02fc087ca4d8cbd23a8d94aa78b25
        image_id: ami-9267cfe5
        size_id: t2.small
        location_id: eu-west-1